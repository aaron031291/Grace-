otel:
  propagate: ["traceparent","tracestate"]
  service_name: "grace-comms"
  trace_ratio: 0.1  # sample 10% of traces
  
  # Custom attributes to include
  custom_attributes:
    - "grace.domain"
    - "grace.kernel"
    - "grace.priority"
    - "grace.qos_class"

metrics:
  # Per-message metrics
  per_message: 
    - "enqueue_ms"
    - "deliver_ms" 
    - "end_to_end_ms"
    - "size_bytes"
    - "retries"
    - "redeliveries"
  
  # Per-topic metrics  
  per_topic:
    - "throughput_rps"
    - "lag"
    - "error_rate"
    - "p99_latency_ms"
    - "consumer_count"
  
  # System-wide metrics
  system:
    - "active_connections"
    - "memory_usage_mb"
    - "cpu_utilization"
    - "disk_usage_mb"

logs:
  redaction: 
    mask_pii: true
    fields_to_mask: ["email", "ssn", "credit_card"]
  
  levels:
    error: ["failed_deliveries", "schema_violations", "security_failures"]
    warn: ["retry_attempts", "backpressure_triggered", "schema_deprecations"]  
    info: ["message_published", "consumer_registered", "schema_updated"]
    debug: ["routing_decisions", "transformation_applied", "filter_matched"]

tracing:
  span_names:
    send:   "comms.send"
    handle: "comms.handle"
    route:  "comms.route"
    transform: "comms.transform"
    
  # Standard attributes for all spans
  standard_attrs:
    - "grace.msg_id"
    - "grace.correlation_id"
    - "grace.domain"
    - "grace.name"
    - "grace.priority"
    - "grace.partition_key"
    
  # Performance tracking
  performance:
    slow_operation_threshold_ms: 1000
    track_payload_sizes: true
    track_serialization_time: true

# Integration with existing systems
integrations:
  prometheus:
    enabled: true
    port: 9090
    path: "/metrics"
    
  jaeger:
    enabled: true
    endpoint: "http://jaeger:14268/api/traces"
    
  elasticsearch:
    enabled: true
    index_pattern: "grace-comms-logs-*"